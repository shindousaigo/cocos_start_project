{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\Monster.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["// Learn TypeScript:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/typescript/index.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/reference/attributes/index.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/life-cycle-callbacks/index.html\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Monster extends cc.Component {\r\n\r\n\t@property\r\n\t// 主角跳跃高度\r\n\tjumpHeight: number = 0;\r\n\t@property\r\n\t// 主角跳跃持续时间\r\n\tjumpDuration: number = 0;\r\n\t@property\r\n\t// 最大移动速度\r\n\tmaxMoveSpeed: number = 0;\r\n\t@property\r\n\t// 加速度\r\n\taccel: number = 0;\r\n\t// 跳跃行为\r\n\tjumpAction: cc.ActionInterval;\r\n\r\n\t// LIFE-CYCLE CALLBACKS:\r\n\r\n\tonLoad(): void {\r\n\t\t// 初始化跳跃动作\r\n\t\tthis.jumpAction = this.setJumpAction();\r\n\t\tthis.node.runAction(this.jumpAction);\r\n\t\t// 初始化键盘输入监听\r\n\t\tthis.setInputControl();\r\n\t}\r\n\r\n\t// start(): void {}\r\n\r\n\tupdate(dt: number): void {\r\n\t\t// 根据当前加速度方向每帧更新速度\r\n\t\tif (this.accLeft) {\r\n\t\t\tthis.xSpeed -= this.accel * dt;\r\n\t\t} \r\n\t\tif (this.accRight) {\r\n\t\t\tthis.xSpeed += this.accel * dt;\r\n\t\t}\r\n\t\t// 限制主角的速度不能超过最大值\r\n\t\tif (Math.abs(this.xSpeed) > this.maxMoveSpeed) {\r\n\t\t\t// if speed reach limit, use max speed with current direction\r\n\t\t\t// this.xSpeed = this.maxMoveSpeed * this.xSpeed / Math.abs(this.xSpeed);\r\n\t\t\tthis.xSpeed = this.xSpeed > 0 ? this.maxMoveSpeed : -this.maxMoveSpeed;\r\n\t\t}\r\n\r\n\t\t// 根据当前速度更新主角的位置\r\n\t\tthis.node.x += this.xSpeed * dt;\r\n\t}\r\n\r\n\t// METHODS:\r\n\r\n\tsetJumpAction(): cc.ActionInterval {\r\n\t\t// 跳跃上升\r\n\t\tvar jumpUp = cc.moveBy(this.jumpDuration, cc.p(0, this.jumpHeight)).easing(cc.easeCubicActionOut());\r\n\t\t// 下落\r\n\t\tvar jumpDown = cc.moveBy(this.jumpDuration, cc.p(0, -this.jumpHeight)).easing(cc.easeCubicActionIn());\r\n\t\t// 不断重复\r\n\t\treturn cc.repeatForever(cc.sequence(jumpUp, jumpDown));\r\n\t}\r\n\r\n\r\n\tprivate accLeft: boolean = false;\r\n\tprivate accRight: boolean = false;\r\n\tprivate xSpeed: number = 0;\r\n\tsetInputControl(): void {\r\n\t\tvar self: Monster = this;\r\n\t\t// 添加键盘事件监听\r\n\t\tcc.eventManager.addListener({\r\n\t\t\tevent: cc.EventListener.KEYBOARD,\r\n\t\t\t// 有按键按下时，判断是否是我们指定的方向控制键，并设置向对应方向加速\r\n\t\t\tonKeyPressed(keyCode, event) {\r\n\t\t\t\tswitch (keyCode) {\r\n\t\t\t\t\tcase cc.KEY.a:\r\n\t\t\t\t\t\tself.accLeft = true;\r\n\t\t\t\t\t\tself.accRight = false;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase cc.KEY.d:\r\n\t\t\t\t\t\tself.accLeft = false;\r\n\t\t\t\t\t\tself.accRight = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 松开按键时，停止向该方向的加速\r\n\t\t\tonKeyReleased(keyCode, event) {\r\n\t\t\t\tswitch (keyCode) {\r\n\t\t\t\t\tcase cc.KEY.a:\r\n\t\t\t\t\t\tself.accLeft = false;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase cc.KEY.d:\r\n\t\t\t\t\t\tself.accRight = false;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, self.node);\r\n\t}\r\n\r\n}\r\n"]}